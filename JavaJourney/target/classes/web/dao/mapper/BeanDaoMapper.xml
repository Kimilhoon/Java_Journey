<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="web.dao.face.BeanDao">
	
	<select id="selectCntAll" resultType="int">
		SELECT count(*) FROM bean
	</select>
	
	<select id="selectAll" resultType="Bean" parameterType="web.util.Paging">
		SELECT * FROM (
			SELECT rowNum rNum, B.* FROM (
				SELECT 
						beanNo, i.beanImgNo, beanName, origin, 
						beanComm, beanInfo, beanPrice, businessNo,
						beanOriginname, beanStoredname, beanImgSize
				FROM	bean b
				INNER JOIN beanImg i ON b.beanImgNo = i.beanImgNo
				ORDER BY beanNo DESC
			) B
		) bean
		WHERE rNum BETWEEN #{ startNo } AND #{ endNo }
	</select>  
	
	<select id="selectByBeanNo" resultType="Bean" parameterType="Bean">
		SELECT 
				beanNo, i.beanImgNo, beanName, origin, 
				beanComm, beanInfo, beanPrice, businessNo,
				beanOriginname, beanStoredname, beanImgSize
		FROM	bean b
		INNER JOIN beanImg i ON b.beanImgNo = i.beanImgNo
		<where>
		AND		beanNo = #{ beanNo }
		</where>
	</select>
	
</mapper>